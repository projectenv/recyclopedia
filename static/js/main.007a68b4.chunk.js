(this.webpackJsonprecyclopedia=this.webpackJsonprecyclopedia||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(3),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},s=n(2),o=n.n(s),u=n(38),l=n.n(u),p=n(16),d=(n(65),n(66),"recyclopedia-api-uuuus"),b="tonyisugly",h="5eba0537206ecc76b4a505e866868853",j=n(6),f=n(8),m=n(39),O=function(){function e(t,n){Object(j.a)(this,e);var r=m.b.anonymous();this.application=new m.a({id:t}),this.applicationUser=void 0,Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.application.logIn(r);case 3:t=e.sent,this.applicationUser=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to login because: ",e.t0);case 10:n.bind(this)();case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))).bind(this)()}return Object(f.a)(e,[{key:"queryForArticles",value:function(e){if(this.applicationUser)return Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.applicationUser.functions.getAllArticles(e);case 3:return t.abrupt("return",t.sent);case 6:return t.next=8,this.applicationUser.functions.getAllArticles();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))).bind(this)();console.error("No user? This is bad news.")}},{key:"deleteArticle",value:function(e){this.applicationUser?Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.applicationUser.functions.removeArticle(e);case 1:case"end":return t.stop()}}),t,this)}))).bind(this)():console.error("No user? This is bad news.")}},{key:"insertArticle",value:function(e){this.applicationUser?Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.applicationUser.functions.createOrUpdateArticle(e);case 2:case"end":return t.stop()}}),t,this)}))).bind(this)():console.error("No user? This is bad news.")}}]),e}(),v=n(9),x=n(7),g=n(19),A=n.n(g),y=n(57),w=n(41),C=n.n(w),k=function(e){return"/".concat(e.toLowerCase().replace(" ","_"))};function _(e){return D.apply(this,arguments)}function D(){return(D=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),600,r="https://api.imgbb.com/1/upload?expiration".concat(600,"&key=").concat(h),e.next=6,fetch(r,{method:"POST",body:n});case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){var t=0;function n(){return t<e.length}function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t+n>e.length?null:e[t+n]}function a(){if(t>e.length)return null;var n=r();return t++,n}return{withPreservedPosition:function(e){var n=t,r=e();return t=n,r},stillParsing:n,peekCharacter:r,requireCharacter:function(e){return r()===e&&(a(),!0)},eatCharacter:a,consumeUntil:function(e){for(var t="";n()&&!e();)t+=a();return t}}}function S(e,t){var n=t.delimiter,r=t.acceptMultiline;if(e.requireCharacter(n)){var a=!0,c=e.consumeUntil((function(){return!r&&e.requireCharacter("\n")?(a=!1,!0):!!e.requireCharacter(n)}));if(c&&a)return c}return null}function U(e){return e.stillParsing()?e.consumeUntil((function(){return!((t=e.peekCharacter())>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9");var t})):null}function P(e){for(;e.stillParsing();){if(" "!=e.peekCharacter()){console.log(e.peekCharacter());break}e.eatCharacter()}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="";for(e=I(e);e.stillParsing();)if(e.requireCharacter("\\"))n+=e.eatCharacter();else if(e.requireCharacter("@"))if(e.requireCharacter("@")){var r=!1,a=I(e.consumeUntil((function(){return!!e.requireCharacter("\n")||!!e.requireCharacter("@")&&(e.requireCharacter("@")&&(r=!0),!0)})));if(a&&r){for(var c="<img ",i=!1;a.stillParsing()&&!i;){P(a);var s=U(a);if(s)if(c+=s,P(a),a.requireCharacter("=")){if(c+="=",P(a),"'"===a.peekCharacter()){var o=S(a,{delimiter:"'"});o?(c+="'"+o+"'","src"===s&&t&&t(o)):(console.error("No string value?"),i=!0)}else{var u=U(a);u?c+=u:(console.error("No value identifier?"),i=!0)}P(a),a.requireCharacter("|")||(U(a)||S(a,{delimiter:"'"}))&&(console.error("Missing pipe separator!"),i=!0)}else console.error("Missing assignment for property?"),i=!0;else console.error("Could not find property name!"),i=!0;c+=" "}c+="/>",i?console.log("error happened"):n+=c}else n+="\n"}else n+="@";else n+=e.eatCharacter();return n}var F=n(4),q=(n(72),n(11)),T=n(17),B=n(29),L=n.n(B),E=n(1),M=function(e){var t=e.changeHandler,n=void 0===t?function(){}:t,r=e.label,a=e.option,c=e.readOnly,i=Object(T.a)(e,["changeHandler","label","option","readOnly"]);return Object(E.jsxs)("div",{className:L.a.group,children:["textarea"===a?Object(E.jsx)("textarea",Object(F.a)({className:L.a.textarea,onChange:c?void 0:n},i)):Object(E.jsx)("input",Object(F.a)({className:L.a.input,onChange:c?void 0:n},i)),r&&Object(E.jsx)("label",{className:"".concat(i.value?L.a.shrink:""),children:r})]})},R=function(e){var t=e.submitFn,n=e.children,r=e.inputItems,i=r.reduce((function(e,t){var n;return e[t[0]]=(null===(n=t[2])||void 0===n?void 0:n.defaultValue)||"",e}),{}),o=Object(s.useState)(i),u=Object(v.a)(o,2),l=u[0],p=u[1],d=function(e){var t=e.target,n=t.name,r=t.value;p(Object(F.a)(Object(F.a)({},l),{},Object(q.a)({},n,r)))},b=function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!t){e.next=7;break}return e.next=4,t(l);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=!0;case 8:e.t0&&p(i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)("form",{onSubmit:b,children:[r.map((function(e,t){return Object(E.jsx)(M,Object(F.a)({changeHandler:d,name:e[0],value:l[e[0]],label:e[1]},e[2]),t)})),n]})},H=n(42),J=n.n(H),V=function(e){var t=e.children,n=void 0===t?"":t,r=e.type,a=void 0===r?"button":r,c=e.styleOption,i=Object(T.a)(e,["children","type","styleOption"]);return Object(E.jsx)("button",Object(F.a)(Object(F.a)({className:"".concat(J.a.button," ").concat(c?J.a[c]:""),type:a},i),{},{children:n}))};function W(e){var t=e.children;return Object(E.jsx)("a",{href:"#",onClick:function(){navigator.clipboard.writeText("@@src='".concat(t,"'@@")).then((function(){alert("copied to clipboard")}))},children:t})}function X(e){var t=e.imagePreviewInfo,n=e.updateImageURLs,r=Object(v.a)(t,2),a=r[0],c=r[1];return Object(E.jsxs)("div",{className:"image-preview-thing",children:[Object(E.jsx)("img",{src:a,alt:c,width:"80px"},a),Object(E.jsx)(W,{children:c}),Object(E.jsx)("button",{onClick:function(){n((function(e){return e.filter((function(e){return Object(v.a)(e,1)[0]!==a}))}))},children:"X"})]})}function z(e){var t=e.api,n=e.articlesData,r=e.setArticlesData,i=e.currentArticle;var o=Object(s.useState)(function(){var e=[];return(null===i||void 0===i?void 0:i.content)&&N(i.content,(function(t){return e.push([t,t])})),e}()),u=Object(v.a)(o,2),l=u[0],p=u[1];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{children:"Upload Media"}),l.map((function(e){return Object(E.jsx)(X,{updateImageURLs:p,imagePreviewInfo:e})})),Object(E.jsx)("form",{children:Object(E.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],n=document.createElement("img");n.src=URL.createObjectURL(t),n.onload=Object(c.a)(a.a.mark((function e(){var t,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.createElement("canvas"),r=t.getContext("2d"),t.width=n.width,t.height=n.height,r.drawImage(n,0,0),c=t.toDataURL().split(",")[1],e.next=8,_(c);case 8:(i=e.sent).success?p(l.concat([[i.data.thumb.url,i.data.url]])):console.error("IMGBB is down. Tony pls get us a server");case 10:case"end":return e.stop()}}),e)})))}})}),Object(E.jsx)(R,{submitFn:function(e){r(Object(F.a)(Object(F.a)({},n),{},{articles:n.articles.map((function(t){return{name:t.name,content:t.name===e.name?e.content:t.content}}))})),Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.insertArticle(e);case 2:return n.next=4,t.queryForArticles();case 4:c=n.sent,r(c);case 6:case"end":return n.stop()}}),n)})))()},inputItems:[["name","Name",(null===i||void 0===i?void 0:i.name)&&{defaultValue:i.name,readOnly:!0}],["content","Content",{option:"textarea",defaultValue:(null===i||void 0===i?void 0:i.content)&&i.content}]],children:Object(E.jsx)(V,{type:"submit",children:i?"Save Article":"Submit Article"})})]})}var G=n(74)({html:!0,breaks:!0,linkify:!0,typographer:!0});function K(e){var t=e.name,n=e.content,r=e.api,a=e.articlesData,c=e.setArticlesData,i=o.a.useState(!1),u=Object(v.a)(i,2),l=u[0],p=u[1],d=Object(x.f)(),b=Object(s.useContext)(Y);return Object(E.jsxs)(E.Fragment,{children:[b.isAdmin&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("button",{onClick:function(){r.deleteArticle(t),d.push("/"),a.articles=a.articles.filter((function(e){return e.name!==t})),c(a)},children:"Delete Page"}),Object(E.jsx)("button",{onClick:function(){return p(!l)},children:"Edit This Page"})]}),l?Object(E.jsx)(z,{currentArticle:{name:t,content:n},api:r,articlesData:a,setArticlesData:c}):Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{className:C.a.title,children:t}),Object(E.jsx)("div",{className:C.a.article,dangerouslySetInnerHTML:{__html:G.render(N(n))}})]})]})}n(134);var Q=function(e){e.api,e.setArticlesData;var t=e.articlesData;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h1",{children:"Welcome to Recyclopedia"}),t.articles.map((function(e){var t=e.name;return Object(E.jsx)("p",{children:Object(E.jsx)(p.b,{to:k(t),children:t})},t)}))]})},Y=Object(s.createContext)({});var Z=function(e){var t=e.api,n=Object(s.useState)(y),r=Object(v.a)(n,2),i=r[0],o=r[1];Object(x.f)(),Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,t.queryForArticles();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var u=Object(s.useState)(localStorage.getItem("isAdmin")||!1),l=Object(v.a)(u,2),d=l[0],h=l[1];function j(e){localStorage.setItem("isAdmin",e),h(e)}return Object(E.jsxs)(Y.Provider,{value:{isAdmin:d,setAdminState:j},children:[Object(E.jsx)("header",{id:A.a.header,children:Object(E.jsxs)("nav",{id:A.a.navbar,children:[Object(E.jsx)(p.b,{to:"/",children:Object(E.jsx)("div",{id:A.a.logoDiv})}),Object(E.jsx)("button",{onClick:function(){prompt("Enter Admin Password")===b&&j(!0)},children:"Admin"}),d&&Object(E.jsx)(p.b,{to:"/admin",children:"Create New Article"})]})}),Object(E.jsx)("main",{id:A.a.main,children:Object(E.jsx)("article",{id:A.a.page,children:Object(E.jsxs)(x.c,{children:[Object(E.jsx)(x.a,{exact:!0,path:"/",children:Object(E.jsx)(Q,{articlesData:i})}),Object(E.jsx)(x.a,{exact:!0,path:"/admin",children:Object(E.jsx)(z,{api:t,articlesData:i,setArticlesData:o})}),i.articles.map((function(e){return function(e){var t=e.name,n=e.content,r=e.api,a=e.articlesData,c=e.setArticlesData;return Object(E.jsx)(x.a,{exact:!0,path:k(t),children:Object(E.jsx)(K,{name:t,content:n,api:r,articlesData:a,setArticlesData:c})},t)}({name:e.name,content:e.content,api:t,articlesData:i,setArticlesData:o})})),Object(E.jsx)(x.a,{children:"404"})]})})}),Object(E.jsx)("footer",{id:A.a.footer})]})};Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new O(d,(function(){l.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(p.a,{basename:"/recyclopedia",children:Object(E.jsx)(Z,{api:this})})}),document.getElementById("root")),i()})),l.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)("p",{children:"Please wait! Loading Recyclopedia..."})}),document.getElementById("root"));case 2:case"end":return e.stop()}}),e)})))()},19:function(e,t,n){e.exports={btn:"App_btn__226iN",navbar:"App_navbar__1QNmF",logoDiv:"App_logoDiv__22FBq",main:"App_main__3HmsK",page:"App_page__3r5jT"}},29:function(e,t,n){e.exports={group:"Input_group__17cm4","form-input-label":"Input_form-input-label__3XeeE",shrink:"Input_shrink__1Ejxt"}},41:function(e,t,n){e.exports={title:"Article_title__3V4iY"}},42:function(e,t,n){e.exports={button:"Button_button__yxyJm",google:"Button_google__4WBul"}},57:function(e){e.exports=JSON.parse('{"articles":[{"name":"Plastic Bottle","tags":["recycle","plastic","common"],"content":"ASDOP"},{"name":"Soda Can","tags":["recycle","metal","common","drinks"],"content":"This **is a very important** article for reasons\\r\\nasdioasoidiosa <img>gegeg</img>"},{"name":"ASIODOISADOISADIOSADOIASDOI","tags":["recycle","metal","common","drinks"],"content":""}]}')},65:function(e,t,n){},66:function(e,t,n){},72:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.007a68b4.chunk.js.map