(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[5],{170:function(e,t,n){"use strict";var c=n(4),a=n(27),r=n(173),s=n.n(r),i=n(0),o=n(21),l=n.n(o),u=n(1),m=Object(i.forwardRef)((function(e,t){var n=e.name,r=e.styledAs,i=e.checked,o=e.onCheck,m=e.children,j=e.className,d=e.onChange,b=Object(a.a)(e,["name","styledAs","checked","onCheck","children","className","onChange"]);return Object(u.jsxs)("div",{className:l()(s.a.button,r?s.a[r]:s.a.default),children:[Object(u.jsx)("input",Object(c.a)({ref:t,type:"checkbox",value:n,checked:i,onChange:function(e){null===d||void 0===d||d(e),null===o||void 0===o||o(e.target.checked)}},b)),Object(u.jsx)("label",{htmlFor:n,className:j,children:m})]})}));t.a=m},171:function(e,t,n){"use strict";var c=n(2),a=n.n(c),r=n(3),s=n(4),i=n(10),o=n(12),l=n(27),u=n(179),m=n.n(u),j=n(0),d=n(21),b=n.n(d),h=n(169),O=n(1);t.a=function(e){var t=e.submitFn,n=e.inputItems,c=e.children,u=e.className,d=Object(l.a)(e,["submitFn","inputItems","children","className"]),f=Object.assign(Object.entries(n).map((function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(i.a)({},n,c.defaultValue||"")}))),p=Object(j.useState)(f),x=Object(o.a)(p,2),v=x[0],k=x[1],g=function(e){var t=e.target,n=t.name,c=t.value;k(Object(s.a)(Object(s.a)({},v),{},Object(i.a)({},n,c)))},_=function(){var e=Object(r.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,null===t||void 0===t?void 0:t(v);case 3:k(f);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",Object(s.a)(Object(s.a)({className:b()(m.a.form,u),onSubmit:_},d),{},{children:[Object(O.jsx)("div",{className:m.a.inputs,children:Object.entries(n).map((function(e,t){var n=Object(o.a)(e,2),c=n[0],a=n[1];return Object(O.jsx)(h.a,Object(s.a)({changeHandler:g,name:c,value:v[c]},a),t)}))}),c]}))}},173:function(e,t,n){e.exports={button:"CheckboxButton_button__3sGm8",oval:"CheckboxButton_oval__3btE3",circle:"CheckboxButton_circle__1GmiA"}},177:function(e,t,n){"use strict";var c=n(4),a=n(10),r=n(12),s=n(27),i=n(178),o=n.n(i),l=n(0),u=n(21),m=n.n(u),j=n(1);t.a=function(e){var t=e.header,n=e.centered,i=void 0!==n&&n,u=e.collapsed,d=void 0!==u&&u,b=e.children,h=e.className,O=Object(s.a)(e,["header","centered","collapsed","children","className"]),f=Object(l.useState)(d),p=Object(r.a)(f,2),x=p[0],v=p[1];return Object(j.jsxs)("div",Object(c.a)(Object(c.a)({className:m()(o.a.collapsibleContainer,h)},O),{},{children:[Object(j.jsxs)("div",{className:m()(o.a.collapsibleTitle,Object(a.a)({},o.a.centered,i)),onClick:function(){return v((function(e){return!e}))},children:[Object(j.jsx)("p",{children:t}),Object(j.jsx)("div",{className:m()("material-icons",Object(a.a)({},o.a.collapsed,x)),children:"expand_more"})]}),!x&&b]}))}},178:function(e,t,n){e.exports={collapsibleContainer:"Collapsible_collapsibleContainer__1frp_",collapsibleTitle:"Collapsible_collapsibleTitle__2U45i",collapsed:"Collapsible_collapsed__3OQ9_",centered:"Collapsible_centered__2bh--"}},179:function(e,t,n){e.exports={form:"Form_form__201Ui",inputs:"Form_inputs__2RGHw"}},192:function(e,t,n){e.exports={floatingSocialMenu:"FloatingSocialMenu_floatingSocialMenu__3IU2W"}},193:function(e,t,n){e.exports={comment:"Comment_comment__2Wan6",commentUser:"Comment_commentUser__19j4V",commentContent:"Comment_commentContent__2nMjH",commentControls:"Comment_commentControls__hM516",commentBtn:"Comment_commentBtn__1L2O-"}},194:function(e,t,n){e.exports={shareBtns:"MediaShareBtns_shareBtns__3oS4c",copyLinkBtn:"MediaShareBtns_copyLinkBtn__3jn0n",clicked:"MediaShareBtns_clicked__Mjj1S"}},195:function(e,t,n){e.exports={checkboxCounterBtn:"CheckboxCounterBtn_checkboxCounterBtn__zZ3p0"}},196:function(e,t,n){e.exports={tableOfContents:"TableOfContents_tableOfContents__NsRqp"}},197:function(e,t,n){e.exports={tagView:"TagViews_tagView__32mEr"}},198:function(e,t,n){e.exports={commentSection:"CommentSection_commentSection__3DSu0",commentForm:"CommentSection_commentForm__3w5Gv",commentSectionContent:"CommentSection_commentSectionContent__3tDc2"}},214:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(3),s=n(12),i=n(23),o=n.n(i),l=n(0),u=n(8),m=n(212),j=n(17),d=n(6),b=n(13),h=n(19),O=n(183),f=n(202),p=n(192),x=n.n(p),v=n(32),k=n(193),g=n.n(k),_=n(213),C=n(170),y=n(1);function w(e){var t,n=Object(v.a)(e);try{for(n.s();!(t=n.n()).done;){var c,a=t.value;if(a.userId===(null===(c=b.e.applicationUser)||void 0===c?void 0:c.id))return a.type}}catch(r){n.e(r)}finally{n.f()}return"none"}function N(e){return{likeCount:e.reduce((function(e,t){return e+("like"===t.type?1:0)}),0),dislikeCount:e.reduce((function(e,t){return e+("dislike"===t.type?1:0)}),0)}}function A(e){var t=e.comment,n=(e.parentId,e.vote),c=e.children,i=t.user?{commenterAvatar:t.user.avatar,commenterUserName:t.user.name}:{commenterAvatar:"https://lh6.googleusercontent.com/-f9MhM40YFzc/AAAAAAAAAAI/AAAAAAABjbo/iG_SORRy0I4/photo.jpg",commenterUserName:"Anonymous"},o=i.commenterAvatar,u=i.commenterUserName,m=Object(l.useState)("none"),j=Object(s.a)(m,2),d=j[0],h=j[1];Object(l.useEffect)((function(){var e,n=Object(v.a)(t.votes);try{for(n.s();!(e=n.n()).done;){var c,a=e.value;if(a.userId===(null===(c=b.e.applicationUser)||void 0===c?void 0:c.id)){h(a.type);break}}}catch(r){n.e(r)}finally{n.f()}}),[]);var O=N(t.votes),f=O.likeCount,p=O.dislikeCount;return Object(y.jsxs)("div",{className:g.a.comment,children:[Object(y.jsxs)("div",{className:g.a.commentUser,children:[Object(y.jsx)("img",{src:o,alt:u}),Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:u}),Object(y.jsxs)("p",{children:[Object(_.a)(t.createdAt,new Date)," ago"]})]})]}),Object(y.jsx)("div",{className:g.a.commentContent,children:t.content}),Object(y.jsxs)("div",{className:g.a.commentControls,children:[Object(y.jsxs)(C.a,{name:"like",styledAs:"oval",className:g.a.commentBtn,checked:"like"===w(t.votes)||"like"===d,onClick:function(){return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("like"===d?"none":"like"),e.next=3,n(b.a.Like);case 3:case"end":return e.stop()}}),e)})))()},children:[Object(y.jsx)("span",{className:"material-icons",children:"thumb_up"}),f]}),Object(y.jsxs)(C.a,{name:"dislike",styledAs:"oval",className:g.a.commentBtn,checked:"dislike"===w(t.votes)||"dislike"===d,onClick:function(){return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("dislike"===d?"none":"dislike"),e.next=3,n(b.a.Dislike);case 3:case"end":return e.stop()}}),e)})))()},children:[Object(y.jsx)("span",{className:"material-icons",children:"thumb_down"}),p]})]}),c]})}var S=function(e){var t=e.comment,n=(e.commentId,e.vote);return Object(y.jsx)(A,{comment:t,vote:n})},M=n(194),B=n.n(M),L=n(204),R=n(205),I=n(206),F=n(207),T=n(208),U=n(209),E=n(55);var D=function(e){var t=e.title,n=location.href,c="Give this article a read - ".concat(t);return Object(y.jsxs)("div",{className:B.a.shareBtns,children:[Object(y.jsx)(L.a,{url:n,quote:c,hashtag:"#projectenv",children:Object(y.jsx)(R.a,{})}),Object(y.jsx)(I.a,{url:n,title:c,hashtags:["projectenv","climatechange","environment","recycling"],children:Object(y.jsx)(F.a,{})}),Object(y.jsx)(T.a,{url:n,title:c,children:Object(y.jsx)(U.a,{})}),Object(y.jsx)(E.a,{styledAs:"oval",className:B.a.copyLinkBtn+" material-icons",onClick:function(){var e=Object(r.a)(a.a.mark((function e(t){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(n);case 2:(c=t.target).innerHTML="done",c.classList.add(B.a.clicked),setTimeout((function(){c.innerHTML="link",c.classList.remove(B.a.clicked)}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"link"})]})},H=n(4),V=n(27),G=n(195),P=n.n(G),q=Object(l.forwardRef)((function(e,t){var n=e.materialIcon,c=e.counter,a=Object(V.a)(e,["materialIcon","counter"]);return Object(y.jsxs)("div",{className:P.a.checkboxCounterBtn,children:[Object(y.jsx)(C.a,Object(H.a)(Object(H.a)({ref:t,styledAs:"circle"},a),{},{children:Object(y.jsx)("span",{className:"material-icons",children:n})})),Object(y.jsx)("p",{children:c})]})}));var Y=function(e){var t=e.title,n=e.commentSectionRef,c=e.votes,i=e.vote,o=Object(l.useState)(!1),u=Object(s.a)(o,2),m=u[0],j=u[1],d=N(c),h=d.likeCount,O=d.dislikeCount;return Object(y.jsxs)("div",{className:x.a.floatingSocialMenu,children:[Object(y.jsx)(q,{name:"likes",materialIcon:"thumb_up",counter:h,checked:"like"===w(c),onClick:function(){return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(b.a.Like);case 2:case"end":return e.stop()}}),e)})))()}}),Object(y.jsx)(q,{name:"dislikes",materialIcon:"thumb_down",counter:O,checked:"dislike"===w(c),onClick:function(){return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(b.a.Dislike);case 2:case"end":return e.stop()}}),e)})))()}}),m&&Object(y.jsx)(D,{title:t}),Object(y.jsx)(E.a,{styledAs:"circle",onClick:function(){var e=n.current;if(e){var t=e.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:t,behavior:"smooth"})}},children:Object(y.jsx)("span",{className:"material-icons",children:"comment"})}),Object(y.jsx)(E.a,{styledAs:"circle",onClick:function(){return j(!m)},children:Object(y.jsx)("span",{className:"material-icons",children:m?"close":"share"})})]})},z=n(71),J=n(196),W=n.n(J),Q=n(177);var Z=function(e){var t=e.sectionHeaders;return t.length>0?Object(y.jsx)(Q.a,{className:W.a.tableOfContents,header:"Table of Contents",centered:!0,children:Object(y.jsx)("nav",{children:t.map((function(e){var t=e.level,n=e.text;return Object(y.jsx)("a",{href:"#"+n,children:Object(y.jsxs)("p",{style:{marginLeft:"".concat(2*(t-1),"em")},children:["\u2022 ",n]})},n)}))})}):null},K=n(197),X=n.n(K);var $,ee=function(e){var t=e.tags;return Object(y.jsx)("div",{className:X.a.tagView,children:t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h5",{children:"This article was tagged with: "}),t.map((function(e){return Object(y.jsx)("p",{children:e},e)}))]}):Object(y.jsx)("h5",{children:"This article has not been tagged."})})},te=n(169),ne=n(69),ce=n(198),ae=n.n(ce),re=n(171),se=Object(l.forwardRef)((function(e,t){var n=e.comments,c=e.articleName,s=e.refetchComments,i=Object(V.a)(e,["comments","articleName","refetchComments"]),o=Object(j.b)(d.g)||d.a.Anonymous,l=Object(j.b)(d.f);return Object(y.jsxs)("div",Object(H.a)(Object(H.a)({className:ae.a.commentSection,ref:t},i),{},{children:[Object(y.jsxs)("div",{className:ae.a.commentForm,children:[Object(y.jsx)("h2",{children:"Add a Comment"}),Object(y.jsx)(re.a,{inputItems:{comment:{placeholder:"Comment",option:"textarea",required:!0}},submitFn:function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.b)(o,l,c,t.comment);case 2:s();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(y.jsx)(E.a,{type:"submit",styledAs:"oval",children:"Comment"})})]}),Object(y.jsxs)("div",{className:ae.a.commentSectionContent,children:[Object(y.jsx)("h2",{children:"Comments"}),Object(y.jsx)("div",{children:n.map((function(e,t){return Object(y.jsx)(S,{commentId:t,comment:e,vote:function(){var e=Object(r.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(o,c,n,{id:t});case 2:s();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},t)}))})]})]}))}));!function(e){e[e.Reading=0]="Reading",e[e.Editting=1]="Editting",e[e.Migration=2]="Migration"}($||($={}));t.default=function(e){var t=e.article,n=e.inRecycling,c=Object(u.g)(),i=Object(j.a)(),p=Object(j.b)(d.g)||d.a.Anonymous,x=p===d.a.Admin,v=t.name,k=t.content,g=t.dateCreated,_=t.dateModified,C=(t.votes,Object(l.useState)(v)),w=Object(s.a)(C,2),N=w[0],A=w[1],S=Object(l.useState)($.Reading),M=Object(s.a)(S,2),B=M[0],L=M[1],R=Object(l.useState)($.Reading),I=Object(s.a)(R,2),F=I[0],T=I[1],U=Object(O.a)(k),D=Object(l.useRef)(null),H=Object(l.useState)([]),V=Object(s.a)(H,2),G=V[0],P=V[1],q=Object(l.useState)(0),J=Object(s.a)(q,2),W=J[0],Q=J[1];function K(){Q(W+1)}function X(e){F!==e?(T(e),L(F)):T(B)}Object(l.useEffect)((function(){Object(r.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(Object(b.l)(void 0)),e.next=3,Object(b.h)(v);case 3:t=e.sent,P(t);case 5:case"end":return e.stop()}}),e)})))()}),[W]);var ce=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(E.a,{styledAs:"oval",onClick:function(){return X($.Editting)},children:"Edit This Page"}),Object(y.jsx)(E.a,{onClick:function(){return X($.Migration)},styledAs:"oval",children:"Migrate Page"})]}),ae=Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(E.a,{styledAs:"oval",onClick:Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Do you want to restore this article?")){e.next=4;break}return e.next=3,i(Object(b.n)(v));case 3:c.push(Object(h.m)(v));case 4:case"end":return e.stop()}}),e)}))),children:"Restore Article"})});return Object(y.jsxs)(y.Fragment,{children:[x&&Object(y.jsxs)("div",{id:o.a.articleControls,children:[n?ae:ce,Object(y.jsx)(E.a,{styledAs:"oval-danger",onClick:function(){confirm(n?"Permenantly delete this article?":"Recycle this article?")&&(i(Object(b.g)(v)),c.push("/"))},children:"Delete Page"})]}),function(){switch(F){case $.Reading:return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Y,{title:v,commentSectionRef:D,votes:t.votes,vote:function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(p,v,t);case 2:K();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(null===t||void 0===t?void 0:t.bannerImage)&&Object(y.jsx)(z.a,{bannerImage:t.bannerImage}),Object(y.jsxs)("h1",{className:o.a.title,children:[" ",v," "]}),Object(y.jsxs)("div",{className:o.a.dateView,children:[Object(y.jsxs)("p",{children:["Created at ",Object(m.a)(g,"LLLL d, yyyy, h:mm a")]}),_&&Object(y.jsxs)("p",{children:["Last Modified at ",Object(m.a)(_,"LLLL d, yyyy, h:mm a")]})]}),Object(y.jsx)(Z,{sectionHeaders:U.headers}),Object(y.jsx)(ne.a,{className:o.a.article,children:U.processed}),Object(y.jsx)(se,{articleName:t.name,ref:D,comments:G,refetchComments:K}),Object(y.jsx)(ee,{tags:t.tags})]});case $.Editting:return x&&Object(y.jsx)(f.default,{currentArticle:t});case $.Migration:return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:"Page Migration"}),Object(y.jsx)(te.a,{label:"Migration Title",changeHandler:function(e){return A(e.target.value)},defaultValue:N,value:N}),Object(y.jsx)(E.a,{onClick:Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(N,v),N!==v){e.next=5;break}alert("You cannot migrate a page unto itself!"),e.next=9;break;case 5:return e.next=7,i(Object(b.k)({name:v,newName:N}));case 7:e.sent.payload&&c.push(Object(h.m)(N));case 9:case"end":return e.stop()}}),e)}))),children:"Migrate Page"})]})}}()]})}}}]);
//# sourceMappingURL=5.2dd83fc0.chunk.js.map